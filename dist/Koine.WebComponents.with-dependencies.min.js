var exports=exports||null;!function(a){"use strinct";a.Publisher=function(){this.clearSubscriptions()},a.Publisher.prototype={subscribe:function(a,b){return this._subscriptions[a]=this._subscriptions[a]||[],this._subscriptions[a].push(b),this},publish:function(b){if(!(b instanceof a.Publisher.EventType))throw new Error("Event must be instance of Koine.Publisher.EventType");var c=this._subscriptions[b.type]||[];return c.forEach(function(a){a.call(b.target,b)}),this},clearSubscriptions:function(){this._subscriptions={}},unsubscribe:function(a,b){if(b)for(var c=this._subscriptions[a]||[],d=1;d>=1;)d=c.indexOf(b),d>=0&&c.splice(d,1);else a&&(this._subscriptions[a]=[]);return this}},a.Publisher.wrap=function(b){b.prototype.getPublisher=function(){return this._publisher=this._publisher||new a.Publisher,this._publisher},b.prototype.on=function(a,b){if(a.indexOf(",")>0){var c=this;a.split(",").forEach(function(a){c.on(a.trim(),b)})}else this.getPublisher().subscribe(a,b);return this},b.prototype.off=function(a,b){return this.getPublisher().unsubscribe(a,b),this},b.prototype.trigger=function(b){return"string"==typeof b&&(b=new a.Publisher.EventType(b)),b.target=b.target||this,this.getPublisher().publish(b),this}},a.Publisher.EventType=function(a,b){if("string"!=typeof a)throw new Error("Type must be provided");this.target=b,this.type=a}}(exports?exports:this.Koine||(this.Koine={}));var exports=exports||void 0;!function(a){"use strinct";var b=function(a){if(!a)throw new Error("Element required");this._element=a};b.prototype={getElement:function(){return this._element},hasClass:function(a){return this.getElement().classList.contains(a)},addClass:function(a){return this.hasClass(a)||this.getElement().classList.add(a),this},removeClass:function(a){return this.hasClass(a)&&this.getElement().classList.remove(a),this},setAttribute:function(a,b){return this.getElement().setAttribute(a,b),this},getAttribute:function(a){return this.getElement().getAttribute(a)},removeAttribute:function(a){return this.getElement().removeAttribute(a),this},setId:function(a){return this.setAttribute("id",a)},getId:function(){return this.getAttribute("id")},setHtml:function(a){return this.getElement().innerHTML=a,this},getHtml:function(){return this.getElement().innerHTML}},a.Decorators=a.Decorators||{},a.Decorators.Dom=a.Decorators.Dom||{},a.Decorators.Dom.ElementDecorator=b}("undefined"==typeof exports?this.Koine||(this.Koine={}):exports);var exports=exports||void 0;!function(a){"use strinct";var b=a.Decorators.Dom.ElementDecorator,c=function(a){b.call(this,a)};c.prototype=new b(1);var d=c.prototype;d.setValue=function(b){var c,d=this.getValue();return b!==d&&(this.getElement().value=b,c=new a.Publisher.EventType("change"),c.oldValue=d,this.trigger(c),c=new a.Publisher.EventType("change:value"),c.oldValue=d,this.trigger(c)),this},d.getValue=function(){return this.getElement().value},a.Publisher.wrap(c),a.Decorators.Dom.InputDecorator=c}("undefined"==typeof exports?this.Koine||(this.Koine={}):exports);var exports=exports||void 0;!function(a){"use strinct";var b=a.Decorators.Dom.InputDecorator,c=function(a){b.call(this,a),this._options=[],this.factoryFromElement(a)};c.prototype=new b(1);var d=c.prototype;d.addOption=function(a){return a},d.createOption=function(b,c,d){var e=document.createElement("option"),f=new a.Decorators.Dom.SelectOptionDecorator(e);return f.setValue(b).setLabel(c),d&&f.select(),f},d.addOption=function(b){this._options.push(b),this.getElement().appendChild(b.getElement());var c=new a.Publisher.EventType("options:added",this);return c.option=b,this.trigger(c),this},d.addOptions=function(a){var b=this;return a.forEach(function(a){b.addOption(a)}),this},d.removeOption=function(b){var c=this.getOptions().indexOf(b);if(c>=0){var d=new a.Publisher.EventType("options:removed",this);d.option=b,this.trigger(d),this.getOptions().splice(c,1)}return this},d.removeOptions=function(a){var b=this;return a.slice(0).forEach(function(a){b.removeOption(a)}),this},d.clearOptions=function(){return this.removeOptions(this.getOptions()),this},d.getOptions=function(){return this._options},d.getSelected=function(){var a=[];return this.getOptions().forEach(function(b){b.isSelected()&&a.push(b)}),this.isMultiple()?a:a.length>0?a[0]:null},d.isMultiple=function(){return null!==this.getAttribute("multiple")},d.factoryFromElement=function(b){var c=[].slice.call(b.querySelectorAll("option")),d=this;c.forEach(function(b){b=new a.Decorators.Dom.SelectOptionDecorator(b),d.addOption(b)})},a.Decorators.Dom.SelectDecorator=c}("undefined"==typeof exports?this.Koine||(this.Koine={}):exports);var exports=exports||void 0;!function(a){"use strinct";var b=a.Decorators.Dom.InputDecorator,c=function(a){b.call(this,a)};c.prototype=new b(1);var d=c.prototype;d.setLabel=function(a){return this.setHtml(a),this},d.getLabel=function(){return this.getHtml()},d.isSelected=function(){return-1===[!1,void 0,null].indexOf(this.getAttribute("selected"))},d.select=function(){return this.setAttribute("selected","selected"),this},d.unselect=function(){return this.removeAttribute("selected"),this},d.toggle=function(){return this.isSelected()?this.unselect():this.select(),this},a.Decorators.Dom.SelectOptionDecorator=c}("undefined"==typeof exports?this.Koine||(this.Koine={}):exports);var exports=exports||void 0;!function(a){"use strinct";var b=function(a,b,c){this.source=a,this.destination=b,this.$=c;var d=this;a.on("dbclick","option",function(){d.select(this)}),b.on("dbclick","option",function(){d.unselect(this)})},c=a.Decorators.Dom.SelectDecorator;b.prototype={getSource:function(){return this.source},getDestination:function(){return this.destination},select:function(a){return this._transferOption(this.getSource()[0],this.getDestination()[0],a)},unselect:function(a){return this._transferOption(this.getDestination()[0],this.getSource()[0],a)},clearOptions:function(){return this.getSource().html(""),this},getOptions:function(){return this._getSelectOptions(this.getSource())},setOptions:function(a){return this._setSelectOptions(this.getSource(),a)},getSelected:function(){return this._getSelectOptions(this.getDestination())},setSelected:function(a){return this._setSelectOptions(this.getDestination(),a)},_setSelectOptions:function(a,b){return a=new c(a.html("")[0]),a.addOptions(b),this},_getSelectOptions:function(a){var b=[];return a.find("option").each(function(a){b.push(a)}),b},addOptions:function(a){var b=this.getSource()[0];return a.forEach(function(a){b.appendChild(a)}),this},getSourceSelected:function(){return this._getSelectedOptions(this.getSource())},getDestinationSelected:function(){return this._getSelectedOptions(this.getDestination())},_getSelectedOptions:function(a){var b=this.$,c=[];return a.find("option").each(function(){b(this).is(":selected")&&c.push(this)}),c},_transferOption:function(a,b,c){return a.removeChild(c),b.appendChild(c),this}},a.WebComponents=a.WebComponents||{},a.WebComponents.DoubleSelect=a.WebComponents.DoubleSelect||b}("undefined"==typeof exports?this.Koine||(this.Koine={}):exports);var exports=exports||void 0;!function(a){"use strinct";var b=function(b,c,d,e){var f,g,h;this.source=new a.Decorators.Dom.SelectDecorator(b[0]),this.destination=new a.Decorators.Dom.SelectDecorator(c[0]),g=this.getSource(),h=this.getDestination(),f=this,this.setContainer(d),g.on("options:added, options:removed",function(){f.render()}),h.on("options:added, options:removed",function(){f.render()}),d.on("click",".option",function(){e(this).toggleClass("selected")}),d.on("click","[data-add-selected]",function(a){a.preventDefault(),f._transferSelected(g,h,d.find(".source .option.selected"))}),d.on("click","[data-add-all]",function(a){a.preventDefault(),f._transferSelected(g,h,d.find(".source .option"))}),d.on("click","[data-remove-selected]",function(a){a.preventDefault(),f._transferSelected(h,g,d.find(".destination .option.selected"))}),d.on("click","[data-remove-all]",function(a){a.preventDefault(),f._transferSelected(h,g,d.find(".destination .option"))})};b.prototype={getSource:function(){return this.source},getDestination:function(){return this.destination},setContainer:function(a){this.$container=a},getContainer:function(){return this.$container},render:function(){var a=this._getOptionsHtml(this.getSource()),b=this._getOptionsHtml(this.getDestination()),c=this._getButtonsHtml(),d=this.template(['<div class="fancy-select">','<div class="source">{{sourceOptions}}</div>',"{{buttons}}",'<div class="destination">{{destinationOptions}}</div>',"</div>"].join(""),{sourceOptions:a,destinationOptions:b,buttons:c});this.getContainer().html(d)},_transferSelected:function(a,b,c){var d=[],e=[];c.each(function(){d.push($(this).data("value"))}),d.forEach(function(b){a.getOptions().forEach(function(a){b==a.getValue()&&e.push(a)})}),a.removeOptions(e),b.addOptions(e)},_getOptionsHtml:function(a){var b=[],c=this.template;return a.getOptions().forEach(function(a){b.push(c('<div class="option" data-value="{{value}}">{{label}}</div>',{value:a.getValue(),label:a.getLabel()}))}),b.join("")},_getButtonsHtml:function(){return['<div class="actions">','<a href="#" data-add-all>&gt;&gt;</a>','<a href="#" data-add-selected>&gt;</a>','<a href="#" data-remove-selected>&lt;</a>','<a href="#" data-remove-all>&lt;&lt;</a>',"</div>"].join("")},template:function(a,b){var c;b=b||{};for(var d in b)c=new RegExp("{{"+d+"}}","g"),a=a.replace(c,b[d]);return a}},a.WebComponents=a.WebComponents||{},a.WebComponents.FancySelect=a.WebComponents.FancySelect||b}("undefined"==typeof exports?this.Koine||(this.Koine={}):exports);